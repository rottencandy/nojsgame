@use 'sass:math';
/**
* Vars
*/
$floorCheckerSize: 50px;
$floorWidth: 10em;
$menuSize: 10em;
$skyColor: skyblue;
$roadPath: 'M 100 0 L 400 0 L 400 900 L 100 900 z';

html, body {
    margin: 0;
    height: 100%;
    font: 100 50px Trebuchet, sans-serif;
    overflow: hidden;
}

.root {
    position: relative;
    background: lightgray;
    min-height: 100%;

    // hide all inputs and use labels to toggle
    > input { display: none }
}

/**
* Main Menu
*/
.menu {
    position: absolute;
    z-index: 999;
    top: 15%;
    left: calc(50% - $menuSize / 2);

    width: $menuSize;
    height: $menuSize;
    border-radius: 10%;

    padding: 1em;
    background: green;
    text-align: center;

    > .start {
        background: blue;
        cursor: pointer;
        padding: 10px;
        border-radius: 20px;
    }

    // hide menu on start click
    #start:checked ~ & {
        animation: 1s ease-in 0s 1 normal both running exitup;
    }
}

.scene {
    position: relative;
    width: 100vw;
    height: 100vh;
    opacity: 0;
    background: $skyColor;

    perspective: 10em;
    perspective-origin: 50% 45%;
    transform-style: preserve-3d;

    // fade in on start
    #start:checked ~ & {
        animation: 1s linear 0.2s 1 normal both running fadein;
    }
}

.angled-backdrop {
    position: fixed;
    width: 100%;
    height: 100%;
    transform-origin: top left;
    background: $skyColor;
    z-index: 1;
    transform: translateZ(-20em) translateY(-50%);
}

.angled-platform {
    position: fixed;
    width: 100%;
    height: 100%;
    transform-origin: top left;
    background: $skyColor;
    transform: translateZ(-20em) translateY(50%) rotateX(90deg);
}

.looping-floor {
    position: absolute;
    width: $floorWidth;
    height: 40em;
    left: calc(50% - $floorWidth / 2);

    // checkerboard pattern
    background:
        repeating-conic-gradient(gray 0% 25%, white 0% 50%)
        50% / 50px
        50px;

    border-bottom: 10px solid red;
    animation: 10s linear 0s infinite normal both running floorLoopZ;

    > .road-path {
        position: relative;
        width: 100%;
        height: 90%;
        clip-path: path($roadPath);
        background: blue;
    }
}

.dist-fade-overlay {
    position: absolute;
    background: linear-gradient($skyColor, #0000);
    width: $floorWidth;
    height: 80%;
    left: calc(50% - $floorWidth / 2);
}

/**
* Keyframes
*/
@keyframes exitup {
    to { top: -100% }
}

@keyframes fadein {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes floorLoopZ {
    from {
        transform: translateY(-10em);
    }
    to {
        transform: translateY(0em);
    }
}
